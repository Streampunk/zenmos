<!--
  Copyright 2018 Streampunk Media Ltd.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/javascript">
    RED.nodes.registerType('audit-log',{
      category: 'zenmos',
      color: '#B19479',
      defaults: {
        name: { value : "" },
        limit: { value : 1000, validate : RED.validators.number() },
        profile: { value : "default" },
        debug: { value : false },
        console: { value : false }
      },
      inputs:1,
      outputs:2,
      icon: "debug.png",
      label: function() {
        return this.name || "audit-log";
      }
    });
</script>

<script type="text/x-red" data-template-name="audit-log">
  <div class="form-row">
    <label for="node-input-name"><i class="fa fa-tag"></i> name</label>
    <input type="text" id="node-input-name" placeholder="name">
  </div>
  <div class="form-row">
    <label for="node-input-limit"><i class="fa fa-archive" aria-hidden="true"></i> limit</label>
    <input type="number" id="node-input-limit" minimum="100" step="100" placeholder="1000">
  </div>
  <div class="form-row">
    <label for="node-input-profile"><i class="fa fa-file-text" aria-hidden="true"></i> profile</label>
    <input type="text" id="node-input-profile" placeholder="default">
  </div>
  <div class="form-row">
    <label for="node-input-debug"><i class="fa fa-random"></i> debug?</label>
    <input type="checkbox" id="node-input-debug">
  </div>
  <div class="form-row">
    <label for="node-input-console"><i class="fa fa-list"></i> console?</label>
    <input type="checkbox" id="node-input-console">
  </div>
</script>

<style>
.param-table table, th, td {
  vertical-align: top;
  padding: 3px;
}
</style>

<script type="text/x-red" data-help-name="audit-log">
  <h1>Audit Log</h1>
  <p>Collect together messages of all types in an ordered log, adding timestamps,
  test profile details and providing an in-memory store of the seqeuence of nmos
  events that has ocurred.</p>

  <p>The node has one input and two outputs. Use the input to receive messages
  that are the output messages of all other zenmos node types. The upper connector is
  for sending messages to other zenmos nodes and the lower connector for replying
  to HTTP messages. Connect the built in <em>http response</em> node to enable
  this.</p>

  <h3>Parameters</h3>
  <div class="param-table">
  <table>
   <tr>
    <th>parameter</th><th>description</th>
   </tr>
   <tr>
    <td><i class="fa fa-tag" aria-hidden="true"></i> name</td>
    <td>Name of node.</td>
   </tr>
   <tr>
    <td><i class="fa fa-archive" aria-hidden="true"></i> limit</td>
    <td>Maximum number of messages to cache in RAM.</td>
   </tr>
   <tr>
    <td><i class="fa fa-file-text" aria-hidden="true"></i> profile</td>
    <td>Name of the profile being tested to attach to log messages.</td>
   </tr>
   <tr>
     <td><i class="fa fa-random"></i> debug?</td>
     <td>Send a message summary to the debug tab?</td>
   </tr>
   <tr>
    <td><i class="fa fa-list"></i> console?</td>
    <td>Send a message summary to the console node-red log?</td>
   </tr>
  </table>
  </div>

</script>
